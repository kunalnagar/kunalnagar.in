<!DOCTYPE html>
<html lang="en" class="light">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="A simple middleware that adds a health check endpoint to your Express.js applications." />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <title>healthie - A health check middleware for Express.js - Kunal Nagar</title>
    <meta
      property="og:image"
      content="https://kunalnagar.in/assets/img/post.png"
    />
    <meta property="og:title" content="healthie - A health check middleware for Express.js - Kunal Nagar" />
    <meta property="og:description" content="A simple middleware that adds a health check endpoint to your Express.js applications." />
    <meta property="og:url" content="https://kunalnagar.in/blog/express-health-check-middleware/" />
    <meta property="og:type" content="article" />
    <meta name="robots" content="index, follow" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap"
  rel="stylesheet"
/>

    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />
  </head>
  <body>
    <main>
      <nav>
  <ul>
    <li><a href="/">Kunal Nagar</a></li>
    <li><a href="/foss">Open Source</a></li>
    <li><a href="/blog">Blog</a></li>
  </ul>
</nav>

      <div class="page-blog-single">
        <section class="section">
          <h1>healthie - A health check middleware for Express.js</h1>
          <time class="muted">November 07, 2020</time>
        </section>
        <article><h2 id="tldr">TL;DR</h2>

<p><code class="language-plaintext highlighter-rouge">healthie</code> is a free and open-source Express.js middleware that adds a <code class="language-plaintext highlighter-rouge">/health</code> endpoint to your Express.js applications and returns itâ€™s uptime with a status of <code class="language-plaintext highlighter-rouge">OK</code>.</p>

<p>Source code and documentation: <a href="https://github.com/kunalnagar/healthie">https://github.com/kunalnagar/healthie</a></p>

<h2 id="inspiration">Inspiration</h2>

<p>I recently stumbled onto <a href="https://expressjs.com/en/advanced/healthcheck-graceful-shutdown.html">some options recommended by Express.js</a> to add health check customization options to your project. While all of them are fantastic and well-maintained, they provide a lot more functionality than I need.</p>

<p>I built this package purely to dive deep into Express.js middleware. So if you do like it, feel free to fork or share. Going forward, I think it would be reasonable to provide an option to customize the health-check route, or the status message.</p>

<h2 id="installation">Installation</h2>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">npm <span class="nb">install</span> <span class="nt">--save</span> @kunalnagarco/healthie</code></pre></figure>

<h2 id="usage">Usage</h2>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">handleHealthCheck</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@kunalnagarco/healthie</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nf">handleHealthCheck</span><span class="p">());</span></code></pre></figure>

<h2 id="result">Result</h2>

<p>Visit <code class="language-plaintext highlighter-rouge">/health</code> and you should see the following:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"uptime"</span><span class="p">:</span><span class="w"> </span><span class="mf">36.883064168</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">process.uptime</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

</article>
        <script
          src="https://giscus.app/client.js"
          data-repo="kunalnagar/kunalnagar.in-comments"
          data-repo-id="R_kgDOJ3RUnQ"
          data-category="Announcements"
          data-category-id="DIC_kwDOJ3RUnc4CXqVX"
          data-mapping="pathname"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="top"
          data-theme="light"
          data-lang="en"
          data-loading="lazy"
          crossorigin="anonymous"
          async
        ></script>
      </div>
    </main>
    
  </body>
</html>
